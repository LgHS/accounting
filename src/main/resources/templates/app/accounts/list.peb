{# @pebvariable name="accounts" type="org.jooq.Result<be.lghs.accounting.model.tables.records.AccountsRecord>" #}
{# @pebvariable name="total" type="double" #}

{% extends '../../base' %}

{% block 'title' %}
    Account list
{% endblock %}

{% block 'content' %}
    <a href="{{ href('/accounts/new') }}">Create account</a>
    <table>
        <thead>
        <tr>
            <!--<th>id</th>-->
            <th>name</th>
            <th>balance</th>
            <th>action</th>
        </tr>
        </thead>
        <tbody>
        {% for account in accounts %}
            <tr>
                <!--<td>{{ account.id }}</td>-->
                <td>{{ account.name }}</td>
                <td class="align-right monospace">{{ account.currentBalance }}</td>
                <td>
                    <a href="{{ href("/accounts/#{account.id}") }}">Edit</a>
                    <a href="{{ href("/accounts/#{account.id}/movements") }}">Movements</a>
                </td>
            </tr>
            {% if loop.last %}
                <tr class="border-top-bold">
                    <td class="bold">Total</td>
                    <td class="align-right monospace">{{ total }}</td>
                    <td></td>
                </tr>
            {% endif %}
        {% else %}
            <tr>
                <td colspan="2">no data yet</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}
